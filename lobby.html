<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Asri Archive - Lobby</title>
    <!-- 1. Firebase SDKs in the head -->
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <!-- 2. Your Firebase config + initialize -->
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyDwuRDh-RBVO1b0iC4pz_cdHEVYfIbVzrU",
        authDomain: "asriarchive-2025.firebaseapp.com",
        projectId: "asriarchive-2025",
        storageBucket: "asriarchive-2025.firebasestorage.app",
        messagingSenderId: "922720875250",
        appId: "1:922720875250:web:a1aea1c8e286496afd966b",
        measurementId: "G-N6R5M29TTS",
      };
      firebase.initializeApp(firebaseConfig);
    </script>
    <!-- 3. Immediate auth guard -->
    <script>
      firebase.auth().onAuthStateChanged((user) => {
        if (!user) {
          // not logged in → send back to login
          window.location.replace("login.html");
        } else {
          // logged in → optionally show your Admin/Guest pill here
          const role = user.isAnonymous ? "Guest" : "Admin";
          const pill = document.createElement("div");
          pill.textContent = role;
          pill.className =
            "role-indicator " + (user.isAnonymous ? "guest-indicator" : "");
          document.body.appendChild(pill);
        }
      });
    </script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: Arial, sans-serif;
        background-color: #dbe9f3; /* Soft bluish gray */
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 40px;
      }

      .nav-container {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 40px;
        width: 100%;
        max-width: 1000px;
      }

      .nav-item {
        background-color: #c08f8f; /* Soft visible pink */
        padding: 40px 20px;
        border-radius: 20px;
        text-align: center;
        transition: transform 0.3s ease;
        cursor: pointer;
        min-height: 280px;
        border: 2px solid #b98989; /* Optional: visual aid during development */
      }

      .nav-item:hover {
        transform: scale(1.05);
      }

      .nav-placeholder {
        width: 200px;
        height: 150px;
        background-color: #5f1a1a;
        margin: 0 auto;
        border-radius: 4px;
      }

      .nav-item h2 {
        font-size: 1.8rem;
        font-weight: bold;
        color: white;
        margin-bottom: 30px;
      }

      .nav-placeholder {
        width: 200px;
        height: 150px;
        background-color: #dcdcdc; /* light gray for placeholder */
        margin: 0 auto;
        border-radius: 4px;
      }

      /* Role‐indicator pill */
      .role-indicator {
        position: fixed;
        top: 1rem; /* 16px from the top */
        right: 1rem; /* 16px from the right */
        background-color: #5b7894;
        color: #fff;
        padding: 0.5rem 1rem; /* vertical | horizontal */
        border: none;
        border-radius: 9999px; /* full pill shape */
        font-size: 0.9rem;
        font-weight: bold;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        cursor: default;
        z-index: 10000;
        white-space: nowrap;
      }

      /* Override for guests */
      .guest-indicator {
        background-color: #6c757d;
      }
    </style>
  </head>
  <body>
    <div class="nav-container">
      <div class="nav-item" onclick="window.location.href='travel.html'">
        <h2>Travels</h2>
        <div class="nav-placeholder"></div>
      </div>

      <div class="nav-item" onclick="window.location.href='bookclub.html'">
        <h2>Ayu’s Bookclub</h2>
        <div class="nav-placeholder"></div>
      </div>

      <div class="nav-item" onclick="window.location.href='exposures.html'">
        <h2>Exposures</h2>
        <div class="nav-placeholder"></div>
      </div>

      <div class="nav-item" onclick="window.location.href='other.html'">
        <h2>...</h2>
        <div class="nav-placeholder"></div>
      </div>
    </div>

    <script src="js/auth.js"></script>
    <script>
      // Check authentication on lobby page load
      document.addEventListener("DOMContentLoaded", function () {
        const currentRole = getUserRole();
        if (!currentRole) {
          // Redirect to login if not authenticated
          window.location.href = "login.html";
        }
      });
    </script>
  </body>
</html>
